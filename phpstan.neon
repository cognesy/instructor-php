includes:
  - vendor/phpstan/phpstan-strict-rules/rules.neon

parameters:
  level: 8
  paths:
    - packages/addons/src
    - packages/auxiliary/src
    - packages/config/src
    - packages/doctor/src
    - packages/dynamic/src
    - packages/evals/src
    - packages/events/src
    - packages/http-client/src
    - packages/hub/src
    - packages/instructor/src
    - packages/messages/src
    - packages/pipeline/src
    - packages/polyglot/src
    - packages/schema/src
    - packages/setup/src
    - packages/tell/src
    - packages/templates/src
    - packages/utils/src
    - config
  excludePaths:
    - packages/*/tests/Fixtures/*
    - packages/*/tests/Support/*
    - packages/experimental
    - examples/
  reportUnmatchedIgnoredErrors: false
  checkMissingCallableSignature: true
  checkUninitializedProperties: true
  checkDynamicProperties: true
  checkAlwaysTrueInstanceof: true
  checkAlwaysTrueStrictComparison: true
  checkPhpDocMethodSignatures: true
  treatPhpDocTypesAsCertain: false
  tmpDir: /tmp
  ignoreErrors:
    # Allow mixed types in specific contexts where needed
    - '#Parameter .* of .* has invalid type mixed#'
    # Allow array access on mixed - common in dynamic contexts
    - '#Cannot access offset .* on mixed#'
    # Ignore missing generic typehints
    -
      identifier: missingType.generics
